---
AWSTemplateFormatVersion: 2010-09-09
Description: AWS Monitoring resources for Givesource(R)
Parameters:
  StackName:
    Type: String

  AdminEmail:
    Type: String

  AdminPagesCloudFrontDistribution:
    Description: ID for Admin Pages CloudFront Distribution
    Type: String

  AdminPagesCloudFrontDomainName:
    Description: Domain name for Admin Pages CloudFront Distribution
    Type: String

  AdminPagesCNAMEs:
    Description: Alternate domain names for Admin Pages CloudFront Distribution
    Type: CommaDelimitedList
    Default: ""

  PublicPagesCloudFrontDistribution:
    Description: ID for Admin Pages CloudFront Distribution
    Type: String

  PublicPagesCloudFrontDomainName:
    Description: Domain name for Public Pages CloudFront Distribution
    Type: String

  PublicPagesCNAMEs:
    Description: Alternate domain names for Public Pages CloudFront Distribution
    Type: CommaDelimitedList
    Default: ""

Conditions:
  HasAdminPagesCNAMEs: !Not [!Equals ["", !Join ["", !Ref AdminPagesCNAMEs]]]
  HasPublicPagesCNAMEs: !Not [!Equals ["", !Join ["", !Ref PublicPagesCNAMEs]]]

Resources:
  AlertSns:
    Type: AWS::SNS::Topic
    Properties:
      DisplayName: !Sub ${StackName} Alerts
      TopicName: !Sub ${StackName}-alerts
      Subscription:
        - Protocol: email
          Endpoint: !Ref AdminEmail

  AdminPagesHealth:
    Type: AWS::Route53::HealthCheck
    Properties:
      HealthCheckConfig:
        Port: 443
        Type: HTTPS
        ResourcePath: /
        FullyQualifiedDomainName: !If
          - HasAdminPagesCNAMEs
          - !Select [0, !Ref AdminPagesCNAMEs]
          - !Ref AdminPagesCloudFrontDomainName
        Regions:
          - us-east-1
          - us-west-1
          - us-west-2
        RequestInterval: 30
        FailureThreshold: 2
      HealthCheckTags:
        - Key: Name
          Value: !Sub ${StackName} Admin Pages Healthy

  AdminPagesHealthAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} Admin Pages Healthy
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      ComparisonOperator: LessThanThreshold
      EvaluationPeriods: 1
      MetricName: HealthCheckStatus
      Namespace: AWS/Route53
      Period: 60
      Statistic: Minimum
      Threshold: 1
      TreatMissingData: breaching
      Dimensions:
        - Name: HealthCheckId
          Value: !Ref AdminPagesHealth

  AdminPagesCloudfront4xxAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} Public Pages 4xx ErrorRate
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/CloudFront
      MetricName: 4xxErrorRate
      Dimensions:
        - Name: DistributionId
          Value: !Ref AdminPagesCloudFrontDistribution
        - Name: Region
          Value: Global
      Statistic: Average
      Period: 300
      ComparisonOperator: GreaterThanThreshold
      Threshold: 5
      EvaluationPeriods: 1
      TreatMissingData: notBreaching

  AdminPagesCloudfront5xxAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} Public Pages 5xx ErrorRate
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/CloudFront
      MetricName: 5xxErrorRate
      Dimensions:
        - Name: DistributionId
          Value: !Ref AdminPagesCloudFrontDistribution
        - Name: Region
          Value: Global
      Statistic: Average
      Period: 300
      ComparisonOperator: GreaterThanThreshold
      Threshold: 5
      EvaluationPeriods: 1
      TreatMissingData: notBreaching

  PublicPagesHealth:
    Type: AWS::Route53::HealthCheck
    Properties:
      HealthCheckConfig:
        Port: 443
        Type: HTTPS
        ResourcePath: /
        FullyQualifiedDomainName: !If
          - HasPublicPagesCNAMEs
          - !Select [0, !Ref PublicPagesCNAMEs]
          - !Ref PublicPagesCloudFrontDomainName
        Regions:
          - us-east-1
          - us-west-1
          - us-west-2
        RequestInterval: 30
        FailureThreshold: 2
      HealthCheckTags:
        - Key: Name
          Value: !Sub ${StackName} Public Pages Healthy

  PublicPagesHealthAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} Public Pages Healthy
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      ComparisonOperator: LessThanThreshold
      EvaluationPeriods: 1
      MetricName: HealthCheckStatus
      Namespace: AWS/Route53
      Period: 60
      Statistic: Minimum
      Threshold: 1
      TreatMissingData: breaching
      Dimensions:
        - Name: HealthCheckId
          Value: !Ref PublicPagesHealth

  PublicPagesCloudfront4xxAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} Public Pages 4xx ErrorRate
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/CloudFront
      MetricName: 4xxErrorRate
      Dimensions:
        - Name: DistributionId
          Value: !Ref PublicPagesCloudFrontDistribution
        - Name: Region
          Value: Global
      Statistic: Average
      Period: 300
      ComparisonOperator: GreaterThanThreshold
      Threshold: 5
      EvaluationPeriods: 1
      TreatMissingData: notBreaching

  PublicPagesCloudfront5xxAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} Public Pages 5xx ErrorRate
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/CloudFront
      MetricName: 5xxErrorRate
      Dimensions:
        - Name: DistributionId
          Value: !Ref PublicPagesCloudFrontDistribution
        - Name: Region
          Value: Global
      Statistic: Average
      Period: 300
      ComparisonOperator: GreaterThanThreshold
      Threshold: 10
      EvaluationPeriods: 1
      TreatMissingData: notBreaching

  ApiGatewayLatencyAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} ApiGateway Latency
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/ApiGateway
      MetricName: Latency
      Dimensions:
        - Name: ApiName
          Value: !Ref StackName
      Statistic: Average
      Period: 60
      ComparisonOperator: GreaterThanThreshold
      Threshold: 750
      EvaluationPeriods: 5
      DatapointsToAlarm: 3
      TreatMissingData: notBreaching

  ApiGatewayIntegrationLatencyAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} ApiGateway IntegrationLatency
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/ApiGateway
      MetricName: IntegrationLatency
      Dimensions:
        - Name: ApiName
          Value: !Ref StackName
      Statistic: Average
      Period: 60
      ComparisonOperator: GreaterThanThreshold
      Threshold: 1500
      EvaluationPeriods: 5
      DatapointsToAlarm: 3
      TreatMissingData: notBreaching

  ApiGateway4XXAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} ApiGateway 4XX Errors
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/ApiGateway
      MetricName: 4XXError
      Dimensions:
        - Name: ApiName
          Value: !Ref StackName
      Statistic: Sum
      Period: 300
      ComparisonOperator: GreaterThanThreshold
      Threshold: 50
      EvaluationPeriods: 1
      TreatMissingData: notBreaching

  ApiGateway5XXAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} ApiGateway 5XX Errors
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/ApiGateway
      MetricName: 5XXError
      Dimensions:
        - Name: ApiName
          Value: !Ref StackName
      Statistic: Sum
      Period: 300
      ComparisonOperator: GreaterThanThreshold
      Threshold: 50
      EvaluationPeriods: 1
      TreatMissingData: notBreaching

  rdsCpuUtilizationAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} RDS CPUUtilization Alarm
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/RDS
      MetricName: CPUUtilization
      Dimensions:
      - Name: DBClusterIdentifier
        Value: !ImportValue givesource-rds-cluster-id
      Statistic: Sum
      Period: 300
      ComparisonOperator: GreaterThanThreshold
      Threshold: 95
      EvaluationPeriods: 1
      TreatMissingData: notBreaching

  rdsAcuUtilizationAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} RDS ACUUtilization Alarm
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/RDS
      MetricName: ACUUtilization
      Dimensions:
      - Name: DBClusterIdentifier
        Value: !ImportValue givesource-rds-cluster-id
      Statistic: Sum
      Period: 60
      ComparisonOperator: GreaterThanThreshold
      Threshold: 85
      EvaluationPeriods: 1
      TreatMissingData: breaching

  rdsFreeableMemoryAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} RDS FreeableMemory Alarm
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/RDS
      MetricName: FreeableMemory
      Dimensions:
      - Name: DBClusterIdentifier
        Value: !ImportValue givesource-rds-cluster-id
      Statistic: Sum
      Period: 300
      ComparisonOperator: LessThanThreshold
      # < 2048MB
      Threshold: 2147483648
      EvaluationPeriods: 1
      TreatMissingData: breaching

  processDonationsLambdaSlowAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ActionsEnabled: true
      AlarmDescription: !Sub ${StackName} processDonations Lambda Slow Alarm
      AlarmActions:
        - !Ref AlertSns
      OKActions:
        - !Ref AlertSns
      Namespace: AWS/Lambda
      MetricName: Duration
      Dimensions:
      - Name: FunctionName
        Value: !Sub ${StackName}-ProcessDonations
      Statistic: Maximum
      Period: 60
      ComparisonOperator: GreaterThanThreshold
      Threshold: 27000
      EvaluationPeriods: 1
      TreatMissingData: notBreaching

  Dashboard:
    Type: AWS::CloudWatch::Dashboard
    Properties:
      DashboardName: !Ref StackName
      DashboardBody: !Sub
        - >
          {
            "widgets": [
              {
                "type": "metric",
                "x": 0,
                "y": 0,
                "width": 3,
                "height": 3,
                "properties": {
                  "title": "AdminPages",
                  "annotations": {
                    "alarms": [
                      "${AdminPagesHealthAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart"
                }
              },
              {
                "type": "metric",
                "x": 0,
                "y": 3,
                "width": 3,
                "height": 3,
                "properties": {
                  "title": "PublicPages",
                  "annotations": {
                    "alarms": [
                      "${PublicPagesHealthAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart"
                }
              },
              {
                "type": "metric",
                "x": 3,
                "y": 0,
                "width": 3,
                "height": 6,
                "properties": {
                  "view": "singleValue",
                  "metrics": [
                    [
                      "AWS/ApiGateway",
                      "Latency",
                      "ApiName",
                      "${StackName}"
                    ],
                    [
                      ".",
                      "IntegrationLatency",
                      ".",
                      "."
                    ]
                  ],
                  "region": "${AWS::Region}",
                  "title": "ApiGateway"
                }
              },
              {
                "type": "metric",
                "x": 6,
                "y": 0,
                "width": 9,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/CloudFront",
                      "Requests",
                      "Region",
                      "Global",
                      "DistributionId",
                      "${PublicPagesCloudFrontDistribution}",
                      {"label": "Public"}
                    ],
                    [
                      ".",
                      ".",
                      ".",
                      ".",
                      ".",
                      "${AdminPagesCloudFrontDistribution}",
                      {"label": "Admin"}
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "stat": "Sum",
                  "period": 300,
                  "title": "CloudFront Request Count"
                }
              },
              {
                "type": "metric",
                "x": 15,
                "y": 0,
                "width": 9,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/ApiGateway",
                      "Count",
                      "ApiName",
                      "${StackName}"
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "stat": "Sum",
                  "period": 300,
                  "title": "ApiGateway Request Count",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 0,
                "y": 6,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "ApiGateway Latency",
                  "annotations": {
                    "alarms": [
                      "${ApiGatewayLatencyAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 6,
                "y": 6,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "ApiGateway IntegrationLatency",
                  "annotations": {
                    "alarms": [
                      "${ApiGatewayIntegrationLatencyAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 12,
                "y": 6,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "ApiGateway 4xxErrors",
                  "annotations": {
                    "alarms": [
                      "${ApiGateway4XXAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 18,
                "y": 6,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "ApiGateway 5xxErrors",
                  "annotations": {
                    "alarms": [
                      "${ApiGateway5XXAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 0,
                "y": 12,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "PublicPages CloudFront 4xx ErrorRate",
                  "annotations": {
                    "alarms": [
                      "${PublicPagesCloudfront4xxAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 6,
                "y": 12,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "PublicPages CloudFront 5xx ErrorRate",
                  "annotations": {
                    "alarms": [
                      "${PublicPagesCloudfront5xxAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 12,
                "y": 12,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "AdminPages CloudFront 4xx ErrorRate",
                  "annotations": {
                    "alarms": [
                      "${AdminPagesCloudfront4xxAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 18,
                "y": 12,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "AdminPages CloudFront 5xx ErrorRate",
                  "annotations": {
                    "alarms": [
                      "${AdminPagesCloudfront5xxAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 0,
                "y": 18,
                "width": 12,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/Lambda",
                      "Errors",
                      "FunctionName",
                      "${StackName}-AdminPostDonationsReceipt",
                      {"label": "AdminPostDonationsReceipt"}
                    ],
                    [
                      "...",
                      "${StackName}-AdminRegisterNonprofit",
                      {"label": "AdminRegisterNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-ApiGatewayFlushCache",
                      {"label": "ApiGatewayFlushCache"}
                    ],
                    [
                      "...",
                      "${StackName}-AssociateLambdaEdgeFunctions",
                      {"label": "AssociateLambdaEdgeFunctions"}
                    ],
                    [
                      "...",
                      "${StackName}-AuthorizeUsers",
                      {"label": "AuthorizeUsers"}
                    ],
                    [
                      "...",
                      "${StackName}-BootstrapSharedDatabase",
                      {"label": "BootstrapSharedDatabase"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCreateUser",
                      {"label": "CognitoCreateUser"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCreateUserGroup",
                      {"label": "CognitoCreateUserGroup"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCreateUserPool",
                      {"label": "CognitoCreateUserPool"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCreateUserPoolClient",
                      {"label": "CognitoCreateUserPoolClient"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCustomMessage",
                      {"label": "CognitoCustomMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-CreateLambdaEdgeFunction",
                      {"label": "CreateLambdaEdgeFunction"}
                    ],
                    [
                      "...",
                      "${StackName}-CreateParameter",
                      {"label": "CreateParameter"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteContent",
                      {"label": "DeleteContent"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteContents",
                      {"label": "DeleteContents"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteDonation",
                      {"label": "DeleteDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteDonor",
                      {"label": "DeleteDonor"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteFile",
                      {"label": "DeleteFile"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteFiles",
                      {"label": "DeleteFiles"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteMessage",
                      {"label": "DeleteMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteMetrics",
                      {"label": "DeleteMetrics"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofit",
                      {"label": "DeleteNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofitDonation",
                      {"label": "DeleteNonprofitDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofitDonationTiers",
                      {"label": "DeleteNonprofitDonationTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofitSlide",
                      {"label": "DeleteNonprofitSlide"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofitUser",
                      {"label": "DeleteNonprofitUser"}
                    ],
                    [
                      "...",
                      "${StackName}-DeletePaymentTransaction",
                      {"label": "DeletePaymentTransaction"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteReports",
                      {"label": "DeleteReports"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSetting",
                      {"label": "DeleteSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSettings",
                      {"label": "DeleteSettings"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSponsor",
                      {"label": "DeleteSponsor"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSponsorTier",
                      {"label": "DeleteSponsorTier"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSponsors",
                      {"label": "DeleteSponsors"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteUser",
                      {"label": "DeleteUser"}
                    ],
                    [
                      "...",
                      "${StackName}-DownloadFile",
                      {"label": "DownloadFile"}
                    ],
                    [
                      "...",
                      "${StackName}-GenerateCustomFrontendCss",
                      {"label": "GenerateCustomFrontendCss"}
                    ],
                    [
                      "...",
                      "${StackName}-GenerateDonationsReceipt",
                      {"label": "GenerateDonationsReceipt"}
                    ],
                    [
                      "...",
                      "${StackName}-GenerateDynamicContent",
                      {"label": "GenerateDynamicContent"}
                    ],
                    [
                      "...",
                      "${StackName}-GeneratePublicPagesHtml",
                      {"label": "GeneratePublicPagesHtml"}
                    ],
                    [
                      "...",
                      "${StackName}-GenerateReport",
                      {"label": "GenerateReport"}
                    ],
                    [
                      "...",
                      "${StackName}-GetContents",
                      {"label": "GetContents"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonation",
                      {"label": "GetDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonations",
                      {"label": "GetDonations"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonationsReceipt",
                      {"label": "GetDonationsReceipt"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonor",
                      {"label": "GetDonor"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonors",
                      {"label": "GetDonors"}
                    ],
                    [
                      "...",
                      "${StackName}-GetEmail",
                      {"label": "GetEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-GetFile",
                      {"label": "GetFile"}
                    ],
                    [
                      "...",
                      "${StackName}-GetFiles",
                      {"label": "GetFiles"}
                    ],
                    [
                      "...",
                      "${StackName}-GetMessage",
                      {"label": "GetMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-GetMessages",
                      {"label": "GetMessages"}
                    ],
                    [
                      "...",
                      "${StackName}-GetMetrics",
                      {"label": "GetMetrics"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofit",
                      {"label": "GetNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitDonation",
                      {"label": "GetNonprofitDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitDonations",
                      {"label": "GetNonprofitDonations"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitDonationTier",
                      {"label": "GetNonprofitDonationTier"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitDonationTiers",
                      {"label": "GetNonprofitDonationTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitPage",
                      {"label": "GetNonprofitPage"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitReport",
                      {"label": "GetNonprofitReport"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofits",
                      {"label": "GetNonprofits"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitSlide",
                      {"label": "GetNonprofitSlide"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitSlides",
                      {"label": "GetNonprofitSlides"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitUsers",
                      {"label": "GetNonprofitUsers"}
                    ],
                    [
                      "...",
                      "${StackName}-GetPaymentTransaction",
                      {"label": "GetPaymentTransaction"}
                    ],
                    [
                      "...",
                      "${StackName}-GetPaymentTransactions",
                      {"label": "GetPaymentTransactions"}
                    ],
                    [
                      "...",
                      "${StackName}-GetReport",
                      {"label": "GetReport"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSecureSetting",
                      {"label": "GetSecureSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSenderEmailAddress",
                      {"label": "GetSenderEmailAddress"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSetting",
                      {"label": "GetSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSettings",
                      {"label": "GetSettings"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSponsor",
                      {"label": "GetSponsor"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSponsors",
                      {"label": "GetSponsors"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSponsorTier",
                      {"label": "GetSponsorTier"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSponsorTiers",
                      {"label": "GetSponsorTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-GetUserProfile",
                      {"label": "GetUserProfile"}
                    ],
                    [
                      "...",
                      "${StackName}-GetUsers",
                      {"label": "GetUsers"}
                    ],
                    [
                      "...",
                      "${StackName}-MetricAddAmount",
                      {"label": "MetricAddAmount"}
                    ],
                    [
                      "...",
                      "${StackName}-MetricMaxAmount",
                      {"label": "MetricMaxAmount"}
                    ],
                    [
                      "...",
                      "${StackName}-MigrateSharedDatabase",
                      {"label": "MigrateSharedDatabase"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchContent",
                      {"label": "PatchContent"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchContents",
                      {"label": "PatchContents"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchDonation",
                      {"label": "PatchDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchMessage",
                      {"label": "PatchMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchMetrics",
                      {"label": "PatchMetrics"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofit",
                      {"label": "PatchNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitDonation",
                      {"label": "PatchNonprofitDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitDonationTiers",
                      {"label": "PatchNonprofitDonationTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitSlide",
                      {"label": "PatchNonprofitSlide"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitSlides",
                      {"label": "PatchNonprofitSlides"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitStatus",
                      {"label": "PatchNonprofitStatus"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchPaymentTransaction",
                      {"label": "PatchPaymentTransaction"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSecureSetting",
                      {"label": "PatchSecureSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSenderEmailAddress",
                      {"label": "PatchSenderEmailAddress"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSetting",
                      {"label": "PatchSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSettings",
                      {"label": "PatchSettings"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSponsor",
                      {"label": "PatchSponsor"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSponsors",
                      {"label": "PatchSponsors"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSponsorTier",
                      {"label": "PatchSponsorTier"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSponsorTiers",
                      {"label": "PatchSponsorTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchUser",
                      {"label": "PatchUser"}
                    ],
                    [
                      "...",
                      "${StackName}-PostContent",
                      {"label": "PostContent"}
                    ],
                    [
                      "...",
                      "${StackName}-PostDonation",
                      {"label": "PostDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-PostDonationsReceipt",
                      {"label": "PostDonationsReceipt"}
                    ],
                    [
                      "...",
                      "${StackName}-PostDonor",
                      {"label": "PostDonor"}
                    ],
                    [
                      "...",
                      "${StackName}-PostFile",
                      {"label": "PostFile"}
                    ],
                    [
                      "...",
                      "${StackName}-PostMessage",
                      {"label": "PostMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofit",
                      {"label": "PostNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitDonation",
                      {"label": "PostNonprofitDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitDonationTier",
                      {"label": "PostNonprofitDonationTier"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitReport",
                      {"label": "PostNonprofitReport"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitSlide",
                      {"label": "PostNonprofitSlide"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitUser",
                      {"label": "PostNonprofitUser"}
                    ],
                    [
                      "...",
                      "${StackName}-PostPaymentTransaction",
                      {"label": "PostPaymentTransaction"}
                    ],
                    [
                      "...",
                      "${StackName}-PostReport",
                      {"label": "PostReport"}
                    ],
                    [
                      "...",
                      "${StackName}-PostSetting",
                      {"label": "PostSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-PostSponsor",
                      {"label": "PostSponsor"}
                    ],
                    [
                      "...",
                      "${StackName}-PostSponsorTier",
                      {"label": "PostSponsorTier"}
                    ],
                    [
                      "...",
                      "${StackName}-PostUser",
                      {"label": "PostUser"}
                    ],
                    [
                      "...",
                      "${StackName}-ProcessDonations",
                      {"label": "ProcessDonations"}
                    ],
                    [
                      "...",
                      "${StackName}-PutNonprofitSEO",
                      {"label": "PutNonprofitSEO"}
                    ],
                    [
                      "...",
                      "${StackName}-PutNonprofitSocialSharing",
                      {"label": "PutNonprofitSocialSharing"}
                    ],
                    [
                      "...",
                      "${StackName}-PutSEO",
                      {"label": "PutSEO"}
                    ],
                    [
                      "...",
                      "${StackName}-PutSocialSharing",
                      {"label": "PutSocialSharing"}
                    ],
                    [
                      "...",
                      "${StackName}-RegisterNonprofit",
                      {"label": "RegisterNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-ResendUserEmailVerification",
                      {"label": "ResendUserEmailVerification"}
                    ],
                    [
                      "...",
                      "${StackName}-S3PutObject",
                      {"label": "S3PutObject"}
                    ],
                    [
                      "...",
                      "${StackName}-S3SyncObjects",
                      {"label": "S3SyncObjects"}
                    ],
                    [
                      "...",
                      "${StackName}-SaveSettings",
                      {"label": "SaveSettings"}
                    ],
                    [
                      "...",
                      "${StackName}-SearchNonprofits",
                      {"label": "SearchNonprofits"}
                    ],
                    [
                      "...",
                      "${StackName}-SecurityHeadersAdminPages",
                      {"label": "SecurityHeadersAdminPages"}
                    ],
                    [
                      "...",
                      "${StackName}-SecurityHeadersUploads",
                      {"label": "SecurityHeadersUploads"}
                    ],
                    [
                      "...",
                      "${StackName}-SendContactMessageEmail",
                      {"label": "SendContactMessageEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-SendDonationNotificationEmail",
                      {"label": "SendDonationNotificationEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-SendDonationsReceiptEmail",
                      {"label": "SendDonationsReceiptEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-SendRegistrationPendingEmail",
                      {"label": "SendRegistrationPendingEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-VerifyEmail",
                      {"label": "VerifyEmail"}
                    ],
                    [
                      "...",
                      "${AWS::Region}.${StackName}-GeneratePublicPagesHtml",
                      {"label": "GeneratePublicPagesHtml"}
                    ],
                    [
                      "...",
                      "${AWS::Region}.${StackName}-SecurityHeadersAdminPages",
                      {"label": "SecurityHeadersAdminPages"}
                    ],
                    [
                      "...",
                      "${AWS::Region}.${StackName}-SecurityHeadersUploads",
                      {"label": "SecurityHeadersUploads"}
                    ],
                    [
                      "...",
                      "${StackName}-WarmSEO",
                      {"label": "WarmSEO"}
                    ],
                    [
                      "...",
                      "${StackName}-WarmSocialSharing",
                      {"label": "WarmSocialSharing"}
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "title": "All Lambda Errors",
                  "legend": {
                    "position": "hidden"
                  },
                  "period": 300,
                  "stat": "Sum"
                }
              },
              {
                "type": "metric",
                "x": 12,
                "y": 18,
                "width": 6,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/Lambda",
                      "Errors",
                      "FunctionName",
                      "${StackName}-AdminPostDonationsReceipt",
                      {"label": "AdminPostDonationsReceipt"}
                    ],
                    [
                      "...",
                      "${StackName}-AdminRegisterNonprofit",
                      {"label": "AdminRegisterNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-ApiGatewayFlushCache",
                      {"label": "ApiGatewayFlushCache"}
                    ],
                    [
                      "...",
                      "${StackName}-AssociateLambdaEdgeFunctions",
                      {"label": "AssociateLambdaEdgeFunctions"}
                    ],
                    [
                      "...",
                      "${StackName}-AuthorizeUsers",
                      {"label": "AuthorizeUsers"}
                    ],
                    [
                      "...",
                      "${StackName}-BootstrapSharedDatabase",
                      {"label": "BootstrapSharedDatabase"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCreateUser",
                      {"label": "CognitoCreateUser"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCreateUserGroup",
                      {"label": "CognitoCreateUserGroup"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCreateUserPool",
                      {"label": "CognitoCreateUserPool"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCreateUserPoolClient",
                      {"label": "CognitoCreateUserPoolClient"}
                    ],
                    [
                      "...",
                      "${StackName}-CognitoCustomMessage",
                      {"label": "CognitoCustomMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-CreateLambdaEdgeFunction",
                      {"label": "CreateLambdaEdgeFunction"}
                    ],
                    [
                      "...",
                      "${StackName}-CreateParameter",
                      {"label": "CreateParameter"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteContent",
                      {"label": "DeleteContent"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteContents",
                      {"label": "DeleteContents"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteDonation",
                      {"label": "DeleteDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteDonor",
                      {"label": "DeleteDonor"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteFile",
                      {"label": "DeleteFile"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteFiles",
                      {"label": "DeleteFiles"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteMessage",
                      {"label": "DeleteMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteMetrics",
                      {"label": "DeleteMetrics"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofit",
                      {"label": "DeleteNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofitDonation",
                      {"label": "DeleteNonprofitDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofitDonationTiers",
                      {"label": "DeleteNonprofitDonationTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofitSlide",
                      {"label": "DeleteNonprofitSlide"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteNonprofitUser",
                      {"label": "DeleteNonprofitUser"}
                    ],
                    [
                      "...",
                      "${StackName}-DeletePaymentTransaction",
                      {"label": "DeletePaymentTransaction"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteReports",
                      {"label": "DeleteReports"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSetting",
                      {"label": "DeleteSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSettings",
                      {"label": "DeleteSettings"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSponsor",
                      {"label": "DeleteSponsor"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSponsorTier",
                      {"label": "DeleteSponsorTier"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteSponsors",
                      {"label": "DeleteSponsors"}
                    ],
                    [
                      "...",
                      "${StackName}-DeleteUser",
                      {"label": "DeleteUser"}
                    ],
                    [
                      "...",
                      "${StackName}-DownloadFile",
                      {"label": "DownloadFile"}
                    ],
                    [
                      "...",
                      "${StackName}-GenerateCustomFrontendCss",
                      {"label": "GenerateCustomFrontendCss"}
                    ],
                    [
                      "...",
                      "${StackName}-GenerateDonationsReceipt",
                      {"label": "GenerateDonationsReceipt"}
                    ],
                    [
                      "...",
                      "${StackName}-GenerateDynamicContent",
                      {"label": "GenerateDynamicContent"}
                    ],
                    [
                      "...",
                      "${StackName}-GeneratePublicPagesHtml",
                      {"label": "GeneratePublicPagesHtml"}
                    ],
                    [
                      "...",
                      "${StackName}-GenerateReport",
                      {"label": "GenerateReport"}
                    ],
                    [
                      "...",
                      "${StackName}-GetContents",
                      {"label": "GetContents"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonation",
                      {"label": "GetDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonations",
                      {"label": "GetDonations"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonationsReceipt",
                      {"label": "GetDonationsReceipt"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonor",
                      {"label": "GetDonor"}
                    ],
                    [
                      "...",
                      "${StackName}-GetDonors",
                      {"label": "GetDonors"}
                    ],
                    [
                      "...",
                      "${StackName}-GetEmail",
                      {"label": "GetEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-GetFile",
                      {"label": "GetFile"}
                    ],
                    [
                      "...",
                      "${StackName}-GetFiles",
                      {"label": "GetFiles"}
                    ],
                    [
                      "...",
                      "${StackName}-GetMessage",
                      {"label": "GetMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-GetMessages",
                      {"label": "GetMessages"}
                    ],
                    [
                      "...",
                      "${StackName}-GetMetrics",
                      {"label": "GetMetrics"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofit",
                      {"label": "GetNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitDonation",
                      {"label": "GetNonprofitDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitDonations",
                      {"label": "GetNonprofitDonations"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitDonationTier",
                      {"label": "GetNonprofitDonationTier"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitDonationTiers",
                      {"label": "GetNonprofitDonationTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitPage",
                      {"label": "GetNonprofitPage"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitReport",
                      {"label": "GetNonprofitReport"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofits",
                      {"label": "GetNonprofits"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitSlide",
                      {"label": "GetNonprofitSlide"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitSlides",
                      {"label": "GetNonprofitSlides"}
                    ],
                    [
                      "...",
                      "${StackName}-GetNonprofitUsers",
                      {"label": "GetNonprofitUsers"}
                    ],
                    [
                      "...",
                      "${StackName}-GetPaymentTransaction",
                      {"label": "GetPaymentTransaction"}
                    ],
                    [
                      "...",
                      "${StackName}-GetPaymentTransactions",
                      {"label": "GetPaymentTransactions"}
                    ],
                    [
                      "...",
                      "${StackName}-GetReport",
                      {"label": "GetReport"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSecureSetting",
                      {"label": "GetSecureSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSenderEmailAddress",
                      {"label": "GetSenderEmailAddress"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSetting",
                      {"label": "GetSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSettings",
                      {"label": "GetSettings"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSponsor",
                      {"label": "GetSponsor"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSponsors",
                      {"label": "GetSponsors"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSponsorTier",
                      {"label": "GetSponsorTier"}
                    ],
                    [
                      "...",
                      "${StackName}-GetSponsorTiers",
                      {"label": "GetSponsorTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-GetUserProfile",
                      {"label": "GetUserProfile"}
                    ],
                    [
                      "...",
                      "${StackName}-GetUsers",
                      {"label": "GetUsers"}
                    ],
                    [
                      "...",
                      "${StackName}-MetricAddAmount",
                      {"label": "MetricAddAmount"}
                    ],
                    [
                      "...",
                      "${StackName}-MetricMaxAmount",
                      {"label": "MetricMaxAmount"}
                    ],
                    [
                      "...",
                      "${StackName}-MigrateSharedDatabase",
                      {"label": "MigrateSharedDatabase"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchContent",
                      {"label": "PatchContent"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchContents",
                      {"label": "PatchContents"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchDonation",
                      {"label": "PatchDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchMessage",
                      {"label": "PatchMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchMetrics",
                      {"label": "PatchMetrics"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofit",
                      {"label": "PatchNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitDonation",
                      {"label": "PatchNonprofitDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitDonationTiers",
                      {"label": "PatchNonprofitDonationTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitSlide",
                      {"label": "PatchNonprofitSlide"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitSlides",
                      {"label": "PatchNonprofitSlides"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchNonprofitStatus",
                      {"label": "PatchNonprofitStatus"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchPaymentTransaction",
                      {"label": "PatchPaymentTransaction"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSecureSetting",
                      {"label": "PatchSecureSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSenderEmailAddress",
                      {"label": "PatchSenderEmailAddress"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSetting",
                      {"label": "PatchSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSettings",
                      {"label": "PatchSettings"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSponsor",
                      {"label": "PatchSponsor"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSponsors",
                      {"label": "PatchSponsors"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSponsorTier",
                      {"label": "PatchSponsorTier"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchSponsorTiers",
                      {"label": "PatchSponsorTiers"}
                    ],
                    [
                      "...",
                      "${StackName}-PatchUser",
                      {"label": "PatchUser"}
                    ],
                    [
                      "...",
                      "${StackName}-PostContent",
                      {"label": "PostContent"}
                    ],
                    [
                      "...",
                      "${StackName}-PostDonation",
                      {"label": "PostDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-PostDonationsReceipt",
                      {"label": "PostDonationsReceipt"}
                    ],
                    [
                      "...",
                      "${StackName}-PostDonor",
                      {"label": "PostDonor"}
                    ],
                    [
                      "...",
                      "${StackName}-PostFile",
                      {"label": "PostFile"}
                    ],
                    [
                      "...",
                      "${StackName}-PostMessage",
                      {"label": "PostMessage"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofit",
                      {"label": "PostNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitDonation",
                      {"label": "PostNonprofitDonation"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitDonationTier",
                      {"label": "PostNonprofitDonationTier"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitReport",
                      {"label": "PostNonprofitReport"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitSlide",
                      {"label": "PostNonprofitSlide"}
                    ],
                    [
                      "...",
                      "${StackName}-PostNonprofitUser",
                      {"label": "PostNonprofitUser"}
                    ],
                    [
                      "...",
                      "${StackName}-PostPaymentTransaction",
                      {"label": "PostPaymentTransaction"}
                    ],
                    [
                      "...",
                      "${StackName}-PostReport",
                      {"label": "PostReport"}
                    ],
                    [
                      "...",
                      "${StackName}-PostSetting",
                      {"label": "PostSetting"}
                    ],
                    [
                      "...",
                      "${StackName}-PostSponsor",
                      {"label": "PostSponsor"}
                    ],
                    [
                      "...",
                      "${StackName}-PostSponsorTier",
                      {"label": "PostSponsorTier"}
                    ],
                    [
                      "...",
                      "${StackName}-PostUser",
                      {"label": "PostUser"}
                    ],
                    [
                      "...",
                      "${StackName}-ProcessDonations",
                      {"label": "ProcessDonations"}
                    ],
                    [
                      "...",
                      "${StackName}-PutNonprofitSEO",
                      {"label": "PutNonprofitSEO"}
                    ],
                    [
                      "...",
                      "${StackName}-PutNonprofitSocialSharing",
                      {"label": "PutNonprofitSocialSharing"}
                    ],
                    [
                      "...",
                      "${StackName}-PutSEO",
                      {"label": "PutSEO"}
                    ],
                    [
                      "...",
                      "${StackName}-PutSocialSharing",
                      {"label": "PutSocialSharing"}
                    ],
                    [
                      "...",
                      "${StackName}-RegisterNonprofit",
                      {"label": "RegisterNonprofit"}
                    ],
                    [
                      "...",
                      "${StackName}-ResendUserEmailVerification",
                      {"label": "ResendUserEmailVerification"}
                    ],
                    [
                      "...",
                      "${StackName}-S3PutObject",
                      {"label": "S3PutObject"}
                    ],
                    [
                      "...",
                      "${StackName}-S3SyncObjects",
                      {"label": "S3SyncObjects"}
                    ],
                    [
                      "...",
                      "${StackName}-SaveSettings",
                      {"label": "SaveSettings"}
                    ],
                    [
                      "...",
                      "${StackName}-SearchNonprofits",
                      {"label": "SearchNonprofits"}
                    ],
                    [
                      "...",
                      "${StackName}-SecurityHeadersAdminPages",
                      {"label": "SecurityHeadersAdminPages"}
                    ],
                    [
                      "...",
                      "${StackName}-SecurityHeadersUploads",
                      {"label": "SecurityHeadersUploads"}
                    ],
                    [
                      "...",
                      "${StackName}-SendContactMessageEmail",
                      {"label": "SendContactMessageEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-SendDonationNotificationEmail",
                      {"label": "SendDonationNotificationEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-SendDonationsReceiptEmail",
                      {"label": "SendDonationsReceiptEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-SendRegistrationPendingEmail",
                      {"label": "SendRegistrationPendingEmail"}
                    ],
                    [
                      "...",
                      "${StackName}-VerifyEmail",
                      {"label": "VerifyEmail"}
                    ],
                    [
                      "...",
                      "${AWS::Region}.${StackName}-GeneratePublicPagesHtml",
                      {"label": "GeneratePublicPagesHtml"}
                    ],
                    [
                      "...",
                      "${AWS::Region}.${StackName}-SecurityHeadersAdminPages",
                      {"label": "SecurityHeadersAdminPages"}
                    ],
                    [
                      "...",
                      "${AWS::Region}.${StackName}-SecurityHeadersUploads",
                      {"label": "SecurityHeadersUploads"}
                    ],
                    [
                      "...",
                      "${StackName}-WarmSEO",
                      {"label": "WarmSEO"}
                    ],
                    [
                      "...",
                      "${StackName}-WarmSocialSharing",
                      {"label": "WarmSocialSharing"}
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "title": "All Lambda Average Request Duration",
                  "legend": {
                    "position": "hidden"
                  }
                }
              },
              {
                "type": "metric",
                "x": 18,
                "y": 18,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "Slow ProcessDonations",
                  "annotations": {
                    "alarms": [
                      "${processDonationsLambdaSlowAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart"
                }
              },
              {
                "type": "metric",
                "x": 0,
                "y": 24,
                "width": 6,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/RDS",
                      "ServerlessDatabaseCapacity",
                      "DBClusterIdentifier",
                      "${DatabaseIdentifier}"
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "title": "RDS Capacity"
                }
              },
              {
                "type": "metric",
                "x": 6,
                "y": 24,
                "width": 6,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/RDS",
                      "CPUUtilization",
                      "DBClusterIdentifier",
                      "${DatabaseIdentifier}",
                      {"label": "CPUUtilization"}
                    ],
                    [
                      "AWS/RDS",
                      "ACUUtilization",
                      "DBClusterIdentifier",
                      "${DatabaseIdentifier}",
                      {"label": "ACUUtilization"}
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "title": "RDS Compute Utilization"
                }
              },
              {
                "type": "metric",
                "x": 12,
                "y": 24,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "RDS JOEUPDATE Utilization",
                  "annotations": {
                    "alarms": [
                      "${rdsFreeableMemoryAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart"
                }
              },
              {
                "type": "metric",
                "x": 18,
                "y": 24,
                "width": 6,
                "height": 6,
                "properties": {
                  "title": "RDS FreeableMemory Utilization",
                  "annotations": {
                    "alarms": [
                      "${rdsFreeableMemoryAlarm.Arn}"
                    ]
                  },
                  "view": "timeSeries",
                  "stacked": false,
                  "type": "chart"
                }
              },
              {
                "type": "metric",
                "x": 0,
                "y": 30,
                "width": 12,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/RDS",
                      "InsertLatency",
                      "DBClusterIdentifier",
                      "${DatabaseIdentifier}"
                    ],
                    [
                      "...",
                      "CommitLatency",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "DeleteLatency",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "SelectLatency",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "UpdateLatency",
                      ".",
                      "."
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "title": "RDS Latency"
                }
              },
              {
                "type": "metric",
                "x": 12,
                "y": 30,
                "width": 12,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/RDS",
                      "InsertThroughput",
                      "DBClusterIdentifier",
                      "${DatabaseIdentifier}"
                    ],
                    [
                      "...",
                      "CommitThroughput",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "DeleteThroughput",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "SelectThroughput",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "UpdateThroughput",
                      ".",
                      "."
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "title": "RDS Throughput"
                }
              },
              {
                "type": "metric",
                "x": 0,
                "y": 36,
                "width": 12,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/RDS",
                      "ConnectionAttempts",
                      "DBClusterIdentifier",
                      "${DatabaseIdentifier}"
                    ],
                    [
                      "...",
                      "DatabaseConnections",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "Queries",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "ActiveTransactions",
                      ".",
                      "."
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "title": "RDS Connection Activity"
                }
              },
              {
                "type": "metric",
                "x": 12,
                "y": 36,
                "width": 6,
                "height": 6,
                "properties": {
                  "metrics": [
                    [
                      "AWS/RDS",
                      "BlockedTransactions",
                      "DBClusterIdentifier",
                      "${DatabaseIdentifier}"
                    ],
                    [
                      "...",
                      "Deadlocks",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "AbortedClients",
                      ".",
                      "."
                    ],
                    [
                      "...",
                      "LoginFailures",
                      ".",
                      "."
                    ]
                  ],
                  "view": "timeSeries",
                  "stacked": false,
                  "region": "${AWS::Region}",
                  "title": "RDS Unexpected Activity"
                }
              }
            ]
          }
        - {DatabaseIdentifier: !ImportValue givesource-rds-cluster-id}

#TempStorageIops. The number of IOPS done on local storage attached to the DB instance. It includes the IOPS for both reads and writes. This metric represents a count and is measured once per second. This is a new metric for Aurora Serverless v2. For details, see Instance-level metrics for Amazon Aurora.
#TempStorageThroughput. The amount of data transferred to and from local storage associated with the DB instance. This metric represents bytes and is measured once per second. This is a new metric for Aurora Serverless v2. For details, see Instance-level metrics for Amazon Aurora.
#
#NetworkReceiveThroughput
#NetworkThroughput
#NetworkTransmitThroughput
#StorageNetworkReceiveThroughput
#StorageNetworkThroughput
#StorageNetworkTransmitThroughput
#
  # ServerlessDatabaseCapacity, ACUUtilization, CPUUtilization, and FreeableMemory
